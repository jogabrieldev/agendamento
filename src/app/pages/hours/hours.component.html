<div class="container my-4">
  <div class="card shadow-lg border-0 rounded-4 overflow-hidden">
    
    <div class="card-header bg-dark text-white p-3">
      <div class="d-flex flex-column flex-sm-row justify-content-between align-items-center gap-3">
        <div class="d-flex align-items-center">
          <i class="bi bi-clock-fill me-2 fs-4 text-primary"></i>
          <h5 class="mb-0 fw-bold">Horários Cadastrados</h5>
        </div>
        
        <button class="btn btn-warning btn-sm rounded-pill px-3 shadow-sm btn-anim" (click)="openIndisponiveis()">
          <i class="bi bi-calendar-x-fill me-1"></i> Ver Indisponíveis
        </button>
      </div>
    </div>

    <div class="card-body p-0">
      <div class="table-responsive" *ngIf="horarios.length > 0; else semHorarios">
        <table class="table table-hover align-middle mb-0">
          <thead class="table-light">
            <tr>
              <th class="ps-4">Horário</th>
              <th>Status</th>
              <th class="text-center">Ações</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let horario of horarios">
              <td class="ps-4 fw-bold text-secondary">
                <i class="bi bi-alarm me-2 text-primary"></i>{{ horario.horario }}
              </td>
              <td>
                <span class="badge rounded-pill" 
                      [ngClass]="horario.status === 'Disponível' ? 'bg-success-subtle text-success' : 'bg-danger-subtle text-danger'">
                  {{ horario.status }}
                </span>
              </td>
              <td class="text-center">
                <div class="d-flex justify-content-center gap-2">
                  <button class="btn btn-outline-primary btn-sm rounded-3" (click)="openEditForm(horario)" title="Editar">
                    <i class="bi bi-pencil-square"></i> <span class="d-none d-md-inline">Editar</span>
                  </button>
                  <button class="btn btn-outline-danger btn-sm rounded-3" (click)="deleteHours(horario.idDispo)" title="Excluir">
                    <i class="bi bi-trash"></i> <span class="d-none d-md-inline">Excluir</span>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <ng-template #semHorarios>
        <div class="text-center text-muted py-5">
          <i class="bi bi-calendar2-x display-4 d-block mb-3 opacity-50"></i>
          Nenhum horário cadastrado no momento.
        </div>
      </ng-template>
    </div>
  </div>

  <div class="text-center mt-4">
    <button class="btn btn-link text-decoration-none text-secondary" routerLink="/home">
      <i class="bi bi-arrow-left me-1"></i> Voltar para o Início
    </button>
  </div>
</div>

<div class="edit-overlay d-flex justify-content-center align-items-center p-3" *ngIf="selectedHour" (click)="$event.target === $event.currentTarget && (selectedHour = null)">
  <div class="edit-popup card shadow-2xl border-0 rounded-4 w-100 animate__animated animate__zoomIn" style="max-width: 450px;">
    <div class="card-header bg-white border-0 pt-4 px-4 d-flex justify-content-between">
      <h5 class="fw-bold mb-0">Ajustar Horário</h5>
      <button class="btn-close" (click)="selectedHour = null"></button>
    </div>
    
    <div class="card-body p-4">
      <div class="mb-3">
        <label class="form-label small fw-bold text-uppercase text-muted">Horário selecionado</label>
        <div class="input-group">
          <span class="input-group-text bg-light border-0"><i class="bi bi-clock"></i></span>
          <input type="text" [(ngModel)]="selectedHour.horario" class="form-control bg-light border-1" readonly>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label small fw-bold text-uppercase text-muted">Definir Status</label>
        <select class="form-select border-2" [(ngModel)]="selectedHour.status">
          <option value="Disponível">✅ Disponível</option>
          <option value="Indisponível">❌ Indisponível</option>
        </select>
      </div>

      <div class="mb-4" *ngIf="selectedHour.status === 'Indisponível'">
        <label class="form-label small fw-bold text-uppercase text-muted">Data do Bloqueio</label>
        <input type="date" [(ngModel)]="selectedHour.dataIndisponivel" class="form-control border-2 border-warning shadow-sm">
      </div>

      <div class="d-grid gap-2">
        <button class="btn btn-primary py-2 fw-bold shadow" (click)="saveHour()">Salvar Alterações</button>
        <button class="btn btn-light py-2" (click)="selectedHour = null">Cancelar</button>
      </div>
    </div>
  </div>
</div>